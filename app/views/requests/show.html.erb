
<% if @request.errors.any? %>

  <% @availabilities.each.errors.full_messages.each do |m| %>
    <%= tag.span m %><br>
  <% end %>

<% end %>
<div class="card">
  <div class="card-header text-right">
    <div id="status-<%= @request.id %>" class="float-left">
      completed: <%= @request.completed? ? icon('far', 'check-square', class: 'strong') : icon('far', 'square', class: 'strong') %>
    </div>
    <%= tag.small time_ago_in_words(@request.created_at) + " ago ", class: 'mr-2' %> <%= link_to "edit", edit_request_path(@request), class: 'btn btn-outline-primary btn-sm' %>
  </div>
  <div class="card-body">
    <%= tag.div @request.subject, class: '' %>
    <% if @request.availabilities %>
    <hr class="m-2">
      <div class="">
        <ul class='list-group availabilities-ul'>
          <% @request.availabilities.each_with_index do |availability, index| %>
            <li class="list-group-item no-bg no-border p-0">
              <%= render partial: 'datetime_request', locals: { availability: availability, index: index} %>
            </li>
            <hr class="m-2">
          <% end %>
        </ul>
      </div>
    <% end %>
    <%= tag.small class:"" do %>
      Client: <%= @request.client_name %>
    <% end %>
    <hr class="mt-1 mb-1">
    <%= @request.body %>
  </div>
</div>
